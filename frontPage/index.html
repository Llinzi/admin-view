<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Index</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">
    <meta name="keywords" content="blog, business, clean, clear, cooporate, creative, design web, flat, marketing, minimal, portfolio, shop, shopping, unique">
    <meta name="author" content="MARTECH | Deer Creative Theme">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/custom_bootstrap.css">
    <link rel="stylesheet" href="assets/css/normalize.css">
    <link rel="stylesheet" href="assets/css/fontawesome.css">
    <link rel="stylesheet" href="assets/css/elegant.css">
    <link rel="stylesheet" href="assets/css/animate.css">
    <link rel="stylesheet" href="assets/css/slick.css">
    <link rel="stylesheet" href="assets/css/scroll.css">
    <link rel="stylesheet" href="assets/css/icomoon.css">
    <link rel="stylesheet" href="assets/css/jquery.fancybox.min.css">
    <link rel="shortcut icon" href="assets/images/shortcut_logo.png">
    <link href="../assets/css/upload-img.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css">


  </head>
  <body>
    <div id="main">
      <header class="coffee">
        <nav class="navigation">
          <div class="container">
            <div class="row no-gutters align-items-center">
              <div class="col-lg-2"><a class="logo" href="index.html"><img src="assets/images/logo_white.png" alt=""></a></div>
              <div class="col-lg-7">
                <div class="navgition-menu d-flex align-items-center justify-content-start">
                  <ul class="mb-0">
                    <li class="toggleable"> <a class="active" href="index.html" style="color: #FFC74A;padding: 10px 0px;">首页</a></li>
                    <li class="toggleable"> <a class="menu-item" href="shop_grid+list_3col.html">店铺</a>
                      <ul class="sub-menu shop d-flex">
                        <div class="nav-column">
                          <h2>店铺布局</h2>
                          <li><a href="shop_grid+list_fullwidth.html">商店网格全宽</a></li>
                          <li><a href="shop_grid+list_fullwidth.html">商店清单全角</a></li>
                          <li><a href="shop_grid+list_3col.html">商店网格3列</a></li>
                          <li><a href="shop_grid+list_3col.html">商店网格3行</a></li>
                        </div>
                        <div class="nav-column">
                          <h2>店铺详情</h2>
                          <li><a href="shop_detail.html">商店详细信息</a></li>
                          <li><a href="shop_detail.html">商店详细信息侧栏</a></li>
                        </div>
                        <div class="nav-column">
                          <h2>商店页面</h2>
                          <li><a href="shop_checkout.html">查看</a></li>
                          <li><a href="shop_order_complete.html">订单完成</a></li>
                          <li><a href="shop_wishlist.html">愿望清单</a></li>
                          <li><a href="shop_compare.html">比较</a></li>
                          <li><a href="shop_cart.html">大车</a></li>
                        </div>
                      </ul>
                    </li>
                    <li class="toggleable"><a class="menu-item" href="about_us.html">关于我们</a></li>
                  </ul>
                </div>
              </div>
              <div class="col-12 col-lg-3">
                <div class="nav-right_block">
                  <div class="form website-search_coffee">
                    <span style="color: white">欢迎您</span>
                  </div>
                  <div class="product-function d-flex align-items-center justify-content-end">
                    <div id="cart">
                      <a href="shop_cart.html" title="购物车"><i class="fa fa-shopping-cart fa-2x"  aria-hidden="true" style="color: white"></i></a>
                    </div>
                    <div id="user" style="margin-left: 60px">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <i class="fa fa-user fa-2x" aria-hidden="true" style="color: white"></i>
                      </a>
                      <div class="dropdown-menu">
                        <a class="dropdown-item" href="#" data-toggle="modal" data-target="#myInfo">个人信息</a>
                        <a class="dropdown-item" href="myOrder.html">我的订单</a>
                        <a class="dropdown-item" href="#" data-toggle="modal" data-target="#consignee">收货地址管理</a>
                        <a class="dropdown-item" href="#">退出登录</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </nav>
      </header>

      <!--个人信息模态框开始-->
      <div class="modal fade" id="myInfo">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">

            <!-- 模态框头部 -->
            <div class="modal-header">
              <h4 class="modal-title">个人信息</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- 模态框主体 -->
            <div class="modal-body">
              <div style="padding-left: 80px">
                <form id="userInfoForm">
                  <table class="table" style="width: 700px">
                  <tr>
                    <td width="5px">头</td>
                    <td rowspan="2">
                      <div class="upload-img-column">
                        <div class="upload-wrap">
                          <div class="box" style="width: 200px;height: 200px">
                            <label class="p dotted">
                              <div class="form-group">
                                <input type="file" accept="image/jpg,image/jpeg,image/png" name="photo" id="userHphoto" @change="onChooseImage($event)" />
                                <img v-if="userInfo.userHphoto == null" class="userImg" src="../assets/images/jiahao.png" alt="">
                                <img v-else="" class="userImg" :src="userInfo.userHphoto" alt="">
                              </div>
                            </label>
                          </div>
                        </div>
                      </div>
                    </td>
                    <td width="80px">姓名</td>
                    <td width="200px">
                      <div class="form-group">
                        <input class="form-control input-group-sm" v-model="userParams.userName" required placeholder="此值是必需的...">
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td width="5px">像</td>
                    <td width="30px">性别</td>
                    <td width="200px">
                      <select class="form-control" v-model="userParams.userSex">
                        <option value="0">男</option>
                        <option value="1">女</option>
                      </select>
                    </td>
                  </tr>
                  <tr>
                    <td width="100px">出生日期</td>
                    <td width="200px">
                      <div class="form-group">
                        <input class="form-control input-group-sm" v-model="userParams.userBirthday" required placeholder="此值是必需的...">
                      </div>
                    </td>
                    <td width="100px">电子邮箱</td>
                    <td width="200px">
                      <div class="form-group">
                        <input class="form-control input-group-sm" v-model="userParams.userEmail" required placeholder="此值是必需的...">
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td width="100px">收货地址</td>
                    <td width="200px">
                      <select class="form-control" v-model="userParams.consigneeInformationId">
                        <option value="">请选择收货地址</option>
                        <option :value="data.consigneeInformationId" v-for="(data,index) in consigneeList">{{data.consigneeInformationName}}</option>
                      </select>
                    </td>
                  </tr>
                </table>
                </form>
              </div>
            </div>

            <!-- 模态框底部 -->
            <div class="modal-footer">
              <button type="button" class="btn btn-primary" @click="userInfoSave()">保存</button>
              <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
            </div>

          </div>
        </div>
      </div>
      <!--个人信息模态框结束-->

      <!--收货地址模态框开始-->
      <div class="modal fade" id="consignee">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">

            <!-- 模态框头部 -->
            <div class="modal-header">
              <h4 class="modal-title">{{consigneeTitle}}</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- 模态框主体 -->
            <div class="modal-body" v-show = "consigneeShow">
              <div v-for="(data,index) in consigneeList">
                <div class="row">
                  <div class="col-sm-4">
                    <h4>{{data.consigneeInformationName}}</h4>
                  </div>
                  <div class="col-sm-6">
                    <h5>{{data.consigneeInformationPhone}}</h5>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-10">
                    {{data.consigneeInformationSite}}
                  </div>
                  <div class="col-sm-2">
                    <a href="#" @click="updateConsignee(data)">编辑</a>
                  </div>
                </div>
                <hr/>
              </div>
            </div>

            <div class="modal-body" v-show = "!consigneeShow">
              <div style="text-align: right">
                <table class="table table-striped">
                  <tr>
                    <td style="padding-top: 20px">收货人姓名：</td>
                    <td><input v-model="consigneeInfo.consigneeInformationName" class="form-control"></td>
                  </tr>
                  <tr>
                    <td style="padding-top: 20px">手机号码：</td>
                    <td><input v-model="consigneeInfo.consigneeInformationPhone" class="form-control"></td>
                  </tr>
                  <tr>
                    <td style="padding-top: 20px">地址：</td>
                    <td><input v-model="consigneeInfo.consigneeInformationSite" class="form-control"></td>
                  </tr>
                </table>
              </div>
            </div>

            <!-- 模态框底部 -->
            <div class="modal-footer" v-show = "consigneeShow">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
            </div>

            <div class="modal-footer" v-show = "!consigneeShow">
              <button type="button" class="btn btn-secondary"  @click="returnConsignee()">返回</button>
              <button type="button" class="btn btn-secondary" @click="saveConsignee()">保存</button>
            </div>

          </div>
        </div>
      </div>
      <!--收货地址模态框结束-->

      <!-- End header-->
      <div class="slider slider_v2">
        <div class="full-fluid">
          <div class="slider_wrapper">
            <div class="slider-block" style="background-image: url('assets/images/homepage04/slider_bg.png')">
              <div class="slider-content"> 
                <div class="container">
                  <div class="row align-items-center">
                    <div class="col-12">
                      <div class="slider-text d-flex flex-column align-items-center">
                        <div class="slider_img" data-animation="fadeInUp" data-delay=".4s"><img src="assets/images/homepage04/slider_img.png" alt=""></div><a class="normal-btn coffee" href="shop_grid+list_3col.html" data-animation="fadeInUp" data-delay=".4s">去购物</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="slider-block" style="background-image: url('assets/images/homepage04/slider_bg_2.png')">
              <div class="slider-content"> 
                <div class="container">
                  <div class="row align-items-center">
                    <div class="col-12">
                      <div class="slider-text d-flex flex-column align-items-center">
                        <div class="slider_img" data-animation="fadeInUp" data-delay=".4s"><img src="assets/images/homepage04/slider_img.png" alt=""></div><a class="normal-btn coffee" href="shop_grid+list_3col.html" data-animation="fadeInUp" data-delay=".4s">Shop now</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="slider-block" style="background-image: url('assets/images/homepage04/slider_bg.png')">
              <div class="slider-content"> 
                <div class="container">
                  <div class="row align-items-center">
                    <div class="col-12">
                      <div class="slider-text d-flex flex-column align-items-center">
                        <div class="slider_img" data-animation="fadeInUp" data-delay=".4s"><img src="assets/images/homepage04/slider_img.png" alt=""></div><a class="normal-btn coffee" href="shop_grid+list_3col.html" data-animation="fadeInUp" data-delay=".4s">Shop now</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- End slider-->
      <div class="ogami-introduce">
        <div class="container">
          <div class="ogami-introduce_block">
            <div class="row align-items-center justify-content-center">
              <div class="col-12 col-md-6">
                <div class="introduce_img text-center"><img src="assets/images/homepage04/introduce_img.png" alt=""></div>
              </div>
              <div class="col-10 col-md-6">
                <div class="introduce-info text-center text-md-left">
                  <h1 class="title">欢迎来到咖啡屋</h1>
                  <p>一杯咖啡,带给一生幸福。 时光就像一杯咖啡,越久越浓。 咖啡就是人生,苦与甜都包含其中。 咖啡飘散过香味,剩苦涩陪着我。 右手咖啡,左手诗篇。 爱情,是种误解,比咖啡因危险一点。 咖啡厅里有童话,我又遇见了他。 心,很苦,像一杯忘了放糖的咖啡。 一杯咖啡,温暖得像一片海洋。</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- End introduce-->
      <div class="delivery-process">
        <div class="benefit-block">
          <div class="container">
            <div class="our-benefits">
              <div class="row">
                <div class="col-12 col-md-4">
                  <div class="benefit-detail d-flex flex-column align-items-center"><img class="benefit-img" src="assets/images/homepage04/benefit-icon1.png" alt="">
                    <h5 class="benefit-title">送货上门</h5>
                    <p class="benefit-describle">对于消费超过99$的订单</p>
                  </div>
                </div>
                <div class="col-12 col-md-4">
                  <div class="benefit-detail d-flex flex-column align-items-center"><img class="benefit-img" src="assets/images/homepage04/benefit-icon2.png" alt="">
                    <h5 class="benefit-title">准时交货</h5>
                    <p class="benefit-describle">如果货有问题</p>
                  </div>
                </div>
                <div class="col-12 col-md-4">
                  <div class="benefit-detail boderless d-flex flex-column align-items-center"><img class="benefit-img" src="assets/images/homepage04/benefit-icon3.png" alt="">
                    <h5 class="benefit-title">安全付款</h5>
                    <p class="benefit-describle">100%安全付款</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="delivery-process_holder">
          <div class="full-fluid">
            <div class="container">
              <div class="delivery-process_wrapper text-center">
                <h1 class="title coffee-underline text-white">交货过程</h1>
                <div class="delivery-process_block">
                  <div class="row justify-content-between">
                    <div class="col-6 col-md-3">
                      <div class="process">
                        <div class="process-icon"><img src="assets/images/homepage04/process_icon_1.png" alt=""></div>
                        <div class="process-text">
                          <h5>第一步</h5>
                          <p>选择你的商品</p>
                        </div>
                      </div>
                    </div>
                    <div class="col-6 col-md-3">
                      <div class="process">
                        <div class="process-icon"><img src="assets/images/homepage04/process_icon_2.png" alt=""></div>
                        <div class="process-text">
                          <h5>第二步</h5>
                          <p>连接最近的咖啡屋</p>
                        </div>
                      </div>
                    </div>
                    <div class="col-6 col-md-3">
                      <div class="process">
                        <div class="process-icon"><img src="assets/images/homepage04/process_icon_3.png" alt=""></div>
                        <div class="process-text">
                          <h5>第三步</h5>
                          <p>分享你的位置</p>
                        </div>
                      </div>
                    </div>
                    <div class="col-6 col-md-3">
                      <div class="process">
                        <div class="process-icon clear"><img src="assets/images/homepage04/process_icon_4.png" alt=""></div>
                        <div class="process-text">
                          <h5>第四步</h5>
                          <p>快速交互</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- End delivery-process-->
      <div class="feature-products coffee">
        <div class="container">
          <div class="row">
            <div class="col-12 text-center">
              <h1 class="title mx-auto">所有咖啡</h1>
            </div>
            <div class="col-12">
              <div id="tab">
                <div id="tab-1">
                  <div class="row no-gutters-sm">
                    <div class="col-6 col-md-4 col-lg-3" v-for="(data,index) in coffeeDataList">
                      <div class="product coffee">
                        <a class="product-img" @click="coffeeDetail(data)">
                        <img  v-if="data.coffeePhoto == null || data.coffeePhoto == ''" src="../assets/images/products/1.jpg" class="img-fluid rounded-top mx-auto d-block">
                        <img  v-else :src="data.coffeePhoto" class="img-fluid rounded-top mx-auto d-block">
                        </a>
                        <h3 class="product-type">{{data.coffeeName}}</h3>
                        <h5 style="color: orange" class="product-rated" v-if="data.coffeeLevel == 5"><i class="icon_star"></i><i class="icon_star"></i><i class="icon_star"></i><i class="icon_star"></i></i><i class="icon_star"></i></h5>
                        <h5 style="color: orange" class="product-rated" v-else-if="data.coffeeLevel == 4"><i class="icon_star"></i><i class="icon_star"></i><i class="icon_star"></i></i><i class="icon_star"></i></h5>
                        <h5 style="color: orange" class="product-rated" v-else-if="data.coffeeLevel == 3"><i class="icon_star"></i><i class="icon_star"></i></i><i class="icon_star"></i></h5>
                        <h5 style="color: orange" class="product-rated" v-else-if="data.coffeeLevel == 2"><i class="icon_star"></i><i class="icon_star"></i></h5>
                        <h5 style="color: orange" class="product-rated" v-else-if="data.coffeeLevel == 1"><i class="icon_star"></i></h5>
                        <h3 class="product-price" v-if="data.coffeeDiscount == 0 || data.coffeeDiscount == null || data.coffeeDiscount == ''">
                          ￥{{data.coffeePrices}}
                        </h3>
                        <h3 class="product-price"  v-else="">
                          ￥{{data.coffeeDiscount}}
                          <del>￥{{data.coffeePrices}}</del>
                        </h3>
                        <h3 class="product-type">{{data.stockCount}}库存</h3>
                        <div class="product-select">
                          <button class="add-to-cart round-icon-btn coffee" @click="addCart(data)" title="加入购物车"><i class="icon_bag_alt"></i></button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div style="width: 320px">
              <a>
                <ul id="page">

                </ul>
              </a>
            </div>
          </div>
        </div>
      </div>
      <!-- End feature-products-->
      <div class="deal-of-week deal-of-week_parallax">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-12 text-center order-1">
              <h1 class="title coffee-underline mx-auto">为什么选择我们</h1>
            </div>
            <div class="col-10 col-md-6 col-lg-4 order-3 order-md-2 order-lg-2">
              <div class="row">
                <div class="col-12">
                  <div class="featured-use text-md-right">
                    <div class="featured-use_intro order-2 order-md-1">
                      <h5>用起来简单明了</h5>
                    </div>
                    <div class="featured-use_icon text-md-right order-1 order-md-2">
                      <div class="icon-detail"><img src="assets/images/homepage04/dow_icon_1.png" alt=""></div>
                    </div>
                  </div>
                </div>
                <div class="col-12">
                  <div class="featured-use text-md-right">
                    <div class="featured-use_intro order-2 order-md-1">
                      <h5>更方便</h5>
                       
                    </div>
                    <div class="featured-use_icon text-md-right order-1 order-md-2">
                      <div class="icon-detail"><img src="assets/images/homepage04/dow_icon_2.png" alt=""></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12 col-md-12 col-lg-4 order-2 order-md-4 order-lg-3 text-center">
              <div class="week-product_img"><img class="img-fluid" src="assets/images/homepage04/wcu_img.png" alt=""></div>
            </div>
            <div class="col-10 col-md-6 col-lg-4 order-4 order-md-3 order-lg-4">
              <div class="row">
                <div class="col-12">
                  <div class="featured-use">
                    <div class="featured-use_intro order-2">
                      <h5>用起来简单明了</h5>
                       
                    </div>
                    <div class="featured-use_icon order-1 ml-0">
                      <div class="icon-detail"><img src="assets/images/homepage04/dow_icon_3.png" alt=""></div>
                    </div>
                  </div>
                </div>
                <div class="col-12">
                  <div class="featured-use">
                    <div class="featured-use_intro order-2">
                      <h5>用起来简单明了</h5>
                       
                    </div>
                    <div class="featured-use_icon order-1 ml-0">
                      <div class="icon-detail"><img src="assets/images/homepage04/dow_icon_4.png" alt=""></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- End deak of the week-->
      <div class="from-blog">
        <div class="container">
          <div class="row">
            <div class="col-12 text-center">
              <h1 class="title coffee-underline">来自博客</h1>
            </div>
            <div class="col-12">
              <div class="news_wrapper">
                <div class="col-4">
                  <div class="news-blog">
                    <div class="news-blog_img"><img src="assets/images/homepage04/blog_img_1.png" alt="blog img"></div>
                    <div class="news-blog_text">
                      <div class="news-credit"><a class="credit date" href="blog_list_sidebar.html"> <i class="far fa-calendar"></i> 3月 4,2017</a><a class="credit comment" href="blog_list_sidebar.html"> <i class="far fa-comments"></i>5</a></div><a class="news-title" href="blog_list_sidebar.html">咔咔咔咔咔咔扩扩扩扩扩</a>
                    </div>
                  </div>
                </div>
                <div class="col-4">
                  <div class="news-blog">
                    <div class="news-blog_img"><img src="assets/images/homepage04/blog_img_2.png" alt="blog img"></div>
                    <div class="news-blog_text">
                      <div class="news-credit"><a class="credit date" href="blog_list_sidebar.html"> <i class="far fa-calendar"></i> 3月 4,2017</a><a class="credit comment" href="blog_list_sidebar.html"> <i class="far fa-comments"></i>5</a></div><a class="news-title" href="blog_list_sidebar.html">那肯定是高考比较不错的相处 </a>
                    </div>
                  </div>
                </div>
                <div class="col-4">
                  <div class="news-blog">
                    <div class="news-blog_img"><img src="assets/images/homepage04/blog_img_3.png" alt="blog img"></div>
                    <div class="news-blog_text">
                      <div class="news-credit"><a class="credit date" href="blog_list_sidebar.html"> <i class="far fa-calendar"></i> 3月 4,2017</a><a class="credit comment" href="blog_list_sidebar.html"> <i class="far fa-comments"></i>5</a></div><a class="news-title" href="blog_list_sidebar.html">代理反馈说看到回复基本的机会并订单VBv </a>
                    </div>
                  </div>
                </div>
                <div class="col-4">
                  <div class="news-blog">
                    <div class="news-blog_img"><img src="assets/images/homepage04/blog_img_4.png" alt="blog img"></div>
                    <div class="news-blog_text">
                      <div class="news-credit"><a class="credit date" href="blog_list_sidebar.html"> <i class="far fa-calendar"></i> 3月 4,2017</a><a class="credit comment" href="blog_list_sidebar.html"> <i class="far fa-comments"></i>5</a></div><a class="news-title" href="blog_list_sidebar.html">中长款各种数据汇总深V和工程规划分析</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- End from the blog-->
      <div class="partner">
        <div class="container">
          <div class="partner_block d-flex justify-content-between" data-slick="{&quot;slidesToShow&quot;: 6}">
            <div class="partner--logo" href=""> <a href="#"><img src="assets/images/partner/partner_01.png" alt="partner logo"></a></div>
            <div class="partner--logo" href=""> <a href="#"><img src="assets/images/partner/partner_02.png" alt="partner logo"></a></div>
            <div class="partner--logo" href=""> <a href="#"><img src="assets/images/partner/partner_01.png" alt="partner logo"></a></div>
            <div class="partner--logo" href=""> <a href="#"><img src="assets/images/partner/partner_02.png" alt="partner logo"></a></div>
            <div class="partner--logo" href=""> <a href="#"><img src="assets/images/partner/partner_01.png" alt="partner logo"></a></div>
            <div class="partner--logo" href=""> <a href="#"><img src="assets/images/partner/partner_02.png" alt="partner logo"></a></div>
            <div class="partner--logo" href=""> <a href=""><img src="assets/images/partner/partner_01.png" alt="partner logo"></a></div>
          </div>
        </div>
      </div>
      <!-- End partner-->
      <footer class="coffee">
        <div class="container">
          <div class="row">
            <div class="col-12 col-sm-12 col-md-4 text-sm-center text-md-left">
              <div class="footer-logo"><img src="assets/images/logo.png" alt=""></div>
              <div class="footer-contact">
                <p>地址: 贵州山咔咔里</p>
                <p>电话: 18396910028</p>
                <p>Email: 266255255@gmail.com</p>
              </div>
              <div class="footer-social"><a class="round-icon-btn coffee" href=""><i class="fab fa-facebook-f"> </i></a><a class="round-icon-btn coffee" href=""><i class="fab fa-twitter"></i></a><a class="round-icon-btn coffee" href=""><i class="fab fa-invision"> </i></a><a class="round-icon-btn coffee" href=""><i class="fab fa-pinterest-p"></i></a></div>
            </div>
            <div class="col-md-8">
              <div class="row">
                <div class="col-12 col-sm-4 text-sm-center text-md-left">
                  <div class="footer-quicklink">
                    <h5>信息化</h5><a href="about_us.html">关于我们</a><a href="checkout.html">退房</a><a href="contact.html">联系</a><a href="about_us.html">服务</a>
                  </div>
                </div>
                <div class="col-12 col-sm-4 text-sm-center text-md-left">
                  <div class="footer-quicklink">
                    <h5>My 我的账户</h5><a href="login.html">我的账户</a><a href="contact.html">联系</a><a href="shop_cart.html">购物车</a><a href="shop_grid+list_3col.html">店铺</a>
                  </div>
                </div>
                <div class="col-12 col-sm-4 text-sm-center text-md-left">
                  <div class="footer-quicklink">
                    <h5>快速店铺</h5><a href="about_us.html">关于我们</a><a href="checkout.html">退房</a><a href="contact.html">联系</a><a href="about_us.html">服务</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="newletter">
          <div class="container">
            <div class="row justify-content-between align-items-center">
              <div class="col-12 col-md-7">
                <div class="newletter_text text-center text-md-left">
                  <h5>立即加入哦们的新闻通讯</h5>
                  <p>获取我们最新商品和特惠信息的电子邮件.</p>
                </div>
              </div>
              <div class="col-12 col-md-5">
                <div class="newletter_input">
                  <input class="round-input" type="text" placeholder="Enter your email">
                  <button>Subcribe</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="footer-credit">
          <div class="container">
            <div class="footer-creadit_block d-flex flex-column flex-md-row justify-content-start justify-content-md-between align-items-baseline align-items-md-center">
              <p class="author">贵州民族大学2016级软件工程3班 <a href="http://www.17sucai.com/" title="17sucai">王显成，曹江柳，张正华</a>.</p><img class="payment-method" src="assets/images/payment.png" alt="">
            </div>
          </div>
        </div>
      </footer>
      <!-- End footer-->
    </div>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery-ui.min.js"></script>
    <script src="assets/js/jquery.countdown.min.js"></script>
    <script src="../assets/js/vue.min.js"></script>
    <script src="assets/js/slick.min.js"></script>
    <script src="assets/js/jquery.easing.js"></script>
    <script src="assets/js/jquery.scrollUp.min.js"></script>
    <script src="assets/js/jquery.zoom.min.js"></script>
    <script src="assets/js/parallax.js"></script>
    <script src="assets/js/jquery.fancybox.js"></script>
    <script src="assets/js/numscroller-1.0.js"></script>
    <script src="assets/js/vanilla-tilt.min.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/bootstrap.js"></script>
    <script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
    <script src="../assets/js/parsley.min.js"></script>
    <script src="../assets/js/axios.min.js"></script>
    <script src="../assets/js/bootstrap-paginator.js"></script>
  <script>
    var vm = new Vue({
      el:"#main",
      data:{
        userInfo:{},//用户信息
        consigneeList:[],
        consigneeTitle:'收货地址管理',
        consigneeShow:true,
        consigneeInfo:{
          consigneeInformationId:null,
        },//收货地址信息
        userParams:{
          userSex:0,
          consigneeInformationId:'',
          userHphoto:'',
        },
        coffeeParams:{
          coffeeStatus:0,
          pageSize:8,
          currentPage:1,
          pages:1,
        },
        coffeeDataList:[],
      },

      mounted:function () {
        //获取缓存中的用户 id
        this.userInfo = JSON.parse(window.sessionStorage.getItem("userInfo"));
        this.userParams = this.userInfo;
        this.selectConsignee();

        //初始化分页模板
        var options = {
          bootstrapMajorVersion: 4,
          currentPage: this.coffeeParams.currentPage, // 当前页数
          numberOfPages: 5, // 显示按钮的数量
          totalPages: this.coffeeParams.pages, // 总页数
          onPageClicked:function(event, originalEvent, type,page){
            vm.coffeeParams.currentPage=page;
            vm.selectCoffee();
          },
          onPageChanged:function(event, oldPage, newPage){
            vm.coffeeParams.currentPage=newPage;
            vm.selectCoffee();
          }
        };
        $("#page").bootstrapPaginator(options);
        this.selectCoffee();

      },

      methods:{
        //选择图片
        onChooseImage:function (event) {
          //$(".coffeeImg").empty();//清空图片
          //使用FileReader对文件对象进行操作
          var fileReader = new FileReader();
          //将读取到的文件编码成Data URL
          this.file = event.target.files[0];
          fileReader.readAsDataURL(this.file);
          //读取完成时
          fileReader.onload = function () {
            //文件输出的内容
            var resultSrc = fileReader.result;
            $(".userImg").attr("src",resultSrc);
          }
        },

        //保存用户信息
        userInfoSave:function () {
          var flag = $('#userInfoForm').parsley().isValid();
          if (flag){
            //判断用户有没有修改图片
            var userHphoto = $("#userHphoto").val();
            console.log(userHphoto);
            //没有修改图片就只修改用户信息
            if (userHphoto == ""){
              $.ajax({
                type: "POST",
                url:"http://localhost:9000/users/updateUser",
                dataType:"json",
                //async:false, //同步
                contentType: "application/json; charset=UTF-8",
                data:JSON.stringify(vm.userParams),
                success:function (data) {
                  if (data.code == 0){
                    vm.userInfo = vm.userParams;
                    window.sessionStorage.setItem("userInfo",JSON.stringify(vm.userInfo));
                    alert(data.msg);
                  }else {
                    alert(data.msg);
                  }
                }
              });
            }else {
              /**
               * 2、上传新图片
               * 3、修改用户信息
               */
              //上传图片
              $.ajax({
                type:"POST",
                url:"http://localhost:9000/upload/uploadPhoto?type=user",
                dataType:"json",
                cache:false,
                processData: false,
                contentType:false,
                data: new FormData($("#userInfoForm")[0]),
                success:function (data) {
                  if (data.code === 0){
                    //绑定用户头像名称，然后修改用户信息
                    vm.userParams.userHphoto = "http://localhost:9000/img/users/"+data.fileName + data.extendedName;
                    $.ajax({
                      type: "POST",
                      url:"http://localhost:9000/users/updateUser",
                      dataType:"json",
                      contentType: "application/json; charset=UTF-8",
                      data:JSON.stringify(vm.userParams),
                      success:function (data) {
                        if (data.code === 0){
                          vm.userInfo = vm.userParams;
                          window.sessionStorage.setItem("userInfo",JSON.stringify(vm.userInfo));
                          alert(data.msg);
                        }else {
                          alert(data.msg);
                        }
                      }
                    });
                  }else {
                    alert(data.msg);
                  }
                }
              });
            }
          }else {
            alert("用户信息不能为空，请填写！")
          }
        },

        //选择收货地址
        selectConsignee:function () {
          axios({
            method:'GET',
            url:'http://localhost:9000/userOperation/selectConsignee',
            params: {"userId":this.userInfo.userId}
          }).then(res =>{
            if (res.data.code === 0){
              this.consigneeList = res.data.dataList
            }else {
              alert(res.data.msg);
            }
          }).catch(res =>{
            console.log(res);
          })
        },

        //用户地址编辑
        updateConsignee:function (data) {
          this.consigneeShow = false;
          this.consigneeTitle = "收货地址编辑";
          this.consigneeInfo = data;
        },

        //收货地址返回
        returnConsignee:function () {
          this.consigneeShow = true;
          this.consigneeTitle = "收货地址管理";
        },
        
        //保存修改的收货地址
        saveConsignee:function () {
          axios({
            method:'POST',
            url:'http://localhost:9000/userOperation/updateConsignee',
            data:vm.consigneeInfo,
            headers: {
              "Content-Type":"application/json"
            }
          }).then(res =>{
            if (res.data.code === 0){
              alert(res.data.msg);
              vm.returnConsignee();
            }else {
              alert(res.data.msg);
            }
          }).catch(res =>{
            console.log(res);
          })
        },

        //查询咖啡
        selectCoffee:function () {
          axios({
            method:'GET',
            url:'http://localhost:9000/coffee/selectCoffee',
            params: this.coffeeParams,
          }).then(res =>{
            if (res.data.code === 0){
              console.log(res);
              this.coffeeDataList = res.data.dataList;
              vm.coffeeParams.pages = res.data.pages;//总页数
              vm.coffeeParams.currentPage = res.data.pageNum //第几页
              $("#page").bootstrapPaginator('setOptions',{currentPage:vm.coffeeParams.currentPage,totalPages:vm.coffeeParams.pages});
            }
          }).catch(res =>{
            console.log(res);
          })
        },

        //加入购物车
        addCart:function (data) {
          //window.location.href = "shop_cart.html";
          if(data.stockCount == 0){
            alert("库存不足请选择其它咖啡！！！");
            return false;
          }
            var url = "http://localhost:9000/coffeeOperation/addShopping";
            var args = {
              "userId":vm.userInfo.userId,
              "coffeeId":data.coffeeId,
              "coffeeName":data.coffeeName,
              "coffeePhoto":data.coffeePhoto,
              "transactionPrice":data.coffeeDiscount>0?data.coffeeDiscount:data.coffeePrices,
              "transactionCount":1
            };
            $.post(url,args,function(data){
              alert(data.msg);
            });
            return false;
        },

        //咖啡详情
        coffeeDetail:function (data) {
          window.sessionStorage.setItem("coffeeDetail",JSON.stringify(data));
          window.location.href = "shop_detail.html";
        }

      },

    })
  </script>
  </body>
</html>